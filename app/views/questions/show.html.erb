<div class="container">
  <div class="row">
    <div class="col-sm-10 offset-sm-1">
      <%= link_to 'Back', root_path %>
      <h1><%= @question.title %></h1>
      <p class="mb-5"><%= markdownify(@question.content) %></p>
      <%= render partial: "comments/comments", object: @question, as: 'commentable' %>
        
      <% if user_signed_in? %>
        <h5>Comentar</h5>
        <%= render partial: "comments/form", locals: {comment: @question} %>
      <% end %>
      
      <h4><%= @question.answers.count %> Answer(s)</h4>
      <hr>
       <% if @question.answers.count == 0 %>
        <p class="ml-3 text-secondary">Do you think you have the right answer to this question?</p>
      <% end %>
      <% @question.answers.each do |answer| %>
        <div><%= markdownify answer.content %></div>
        <%= link_to 'upvote', like_answer_path(answer), method: :put %>
        <%= answer.get_likes.size %>
        <%= link_to 'downvote', dislike_answer_path(answer), method: :put %>  
        
        <%= render partial: "comments/comments", object: answer, as: 'commentable' %>
        <hr>
        <%= render partial: "comments/form", locals: {comment: answer} if user_signed_in?  %>
      <% end %>
      
      <% if user_signed_in? %>
      
      <h4 class="mt-5">Your answer</h4>
        <hr>
        <%= form_for [@question, @question.answers.build] do |f| %>
          <div class="form-group mt-2">
            <%= f.text_area :content, class: "form-control", rows: 5,  placeholder: "Write your answer" %>
            <div class="text-right mt-2">
              <%= f.submit 'Submit answer', class: 'btn btn-primary' %>
            </div>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
